<!DOCTYPE html>

<html>
<head>
   <title>GDG Philippines Chrome Extension - Events</title>

   <meta charset="utf-8" />
   <meta name="author" content="Jomar Tigcal" />
   <meta name="description" content="Google Chrome Extension for the GDG Philippines community." />

   <link rel="stylesheet" href="stylesheet.css" />

   <style type="text/css">
		div.header {
			background-color: #E0E0E0;
			color: #000000;
			font-family: sans-serif;
			font-size: 12pt;
			font-weight: bold;
			font-style: normal;
			text-align:left;
			padding: 5px;
		}
		ul {
			padding-bottom:10px;
		}
   </style>
</head>

<body onload="getEvents()">

	<div class="imageHeader">
		<a href="https://www.gdgph.org" target="_blank">
			<img src="images/gdgph-logo.png" style="height:100px;border:0" title="GDG Philippines" alt="GDG Philippines"/>
		</a>
		<br />
	</div>

	<div class="nav">
		Events |
		<a href="links.html">Links</a> &nbsp; |
		<a href="about.html">About</a> &nbsp;
	</div>

	<div id="links" style="width: 427px; border: solid #E0E0E0 0px; text-align: left; padding: 5px">

	<div data-role="content">
		<div id="events">&nbsp;</div>
	</div>

	<script type="text/javascript">
		function getEvents() {
			const request = new XMLHttpRequest();
			request.open('GET', 'https://cors-anywhere.herokuapp.com/https://api.meetup.com/2/events?&sign=true&photo-host=public&page=50&status=past,upcoming&group_urlname=gdgphilippines', true);
			request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			request.onreadystatechange = function () {
				  if (request.readyState == XMLHttpRequest.DONE) {
					  if (request.status != 200) {
						  console.log("Unable to get events...")
						  return;
					  }

					  displayEvents(JSON.parse(request.responseText).results)
				  }
			};
			request.send();
		}

		function displayEvents(events) {
			var eventString = ""
			for(i=events.length-1; i>0; i--) {
				var event = events[i]
				eventString += "<br /><br /><a href='" + event.event_url + "'>" + event.name + "</a>"
			}

			document.getElementById("events").innerHTML = eventString
		}
	</script>
</div>
</body>
</html>
